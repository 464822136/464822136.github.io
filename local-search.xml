<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>SpringSecurity自定义资源认证</title>
    <link href="undefined2020/01/24/SpringSecurity%E8%87%AA%E5%AE%9A%E4%B9%89%E8%B5%84%E6%BA%90%E8%AE%A4%E8%AF%81/"/>
    <url>2020/01/24/SpringSecurity%E8%87%AA%E5%AE%9A%E4%B9%89%E8%B5%84%E6%BA%90%E8%AE%A4%E8%AF%81/</url>
    
    <content type="html"><![CDATA[<p>实现自定义资源认证步骤分为两步</p><p>1.过滤器拦截</p><p>​    1.1首先自定义一个类实现SpringSecurity提供的 FilterInvocationSecurityMetadataSource 接口<br>​    1.2重写三个方法</p><p><img src="/img/FilterInvocationSecurityMetadataSource.png" srcset="undefined" alt></p><p>​    主要写第一个方法的逻辑就可以实现自定义的资源认证</p><p>​    <img src="/img/getAttributesMethod.png" srcset="undefined" alt></p><p>​    方法中的参数就是SpringSecurity封装了HttpServletRequest、HttpServletResponse、FilterChain的    一个类</p><p>​    <img src="../../public/img/FilterInvocation.png"></p><p>回到上面getAttributes方法</p><p>1.2.1通过Request获取到请求的资源（地址）</p><p>​        获取到请求的地址做什么？</p><p>​        这里这个方法的作用是将请求的资源所需要的权限返回去出去，需要用SpringSecurtiy提供的类封装好，</p><p>​        然后这个资源的需要的权限不一定只是一个所以是一个集合。</p><p>1.2.2通过请求的地址查询出需要的权限封装好并返回集合</p><p>​        下一步就是判断这个请求地址的权限在我们已认证的权限中有没有这个权限</p><p>2.自定义权限决策器</p><p>   SpringSecurity默认的决策器有三个分别是：</p><p>   <img src="../../public/img/defaultDecide.jpg"></p><p>​    这里的票数应该是指权限的通过次数，比如访问个菜单或者按钮，他们需要三个权限，而登录的用户只有两个    权限那么就会有两票</p><p>​    因为我们是自定义决策器所以实现SpringSecurity提供的接口就好了</p><h4>AccessDecisionManager</h4><p></p><p>   也是三个方法</p><p>​    <img src="../../public/img/AccessDecisionManager.png"></p><p>主要写第一个方法的逻辑就好了，下面介绍了该方法的三个参数</p><p>Authentication var1: 封装了一些认证的信息</p><p>Object var2: 目前还没用到</p><p>Collection<configattribute> var3: 这参数是FilterInvocationSecurityMetadataSource 的getAttributes(Object o)返回过来的集合参数，也就是请求的地址所需要的权限用现在自定义决策器来验证该用户是否有权限</configattribute></p><p><img src="../../public/img/decide.png"></p><p>这里可根据自己的逻辑进行判断</p><p>接下来核心都写好了，但是还没指定用他们</p><p>在自定义类继承<strong>WebSecurityConfigurerAdapter</strong>的configure(HttpSecurity http)的方法中使用他们</p><p><img src="../../public/img/httpConfig.png"></p><p>以上自定义资源认证来自个人理解，还请大佬们多多指教，不喜勿喷。</p>]]></content>
    
    
    
    <tags>
      
      <tag>SpringSecurity</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>第一篇内容</title>
    <link href="undefined2019/05/28/%E7%AC%AC%E4%B8%80%E7%AF%87%E5%86%85%E5%AE%B9/"/>
    <url>2019/05/28/%E7%AC%AC%E4%B8%80%E7%AF%87%E5%86%85%E5%AE%B9/</url>
    
    <content type="html"><![CDATA[<p>第一个博客，经过三番五次的安装，终于配的像个样子了。然后步入正题</p><p>1、使用 git clone 主题连接 放到 themes/主题名 然后把 _config.yml的theme改成下载的主题名    </p><p>2、到github下载主题下载完成后解压到themes之后也把 _config.yml themes改成下载好的名字</p>]]></content>
    
    
    <categories>
      
      <category>初尝</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>